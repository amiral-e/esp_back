<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>backend</title><meta name="description" content="Documentation for backend"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">backend</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>backend</h1></div><div class="tsd-panel tsd-typography"><h1 id="comptacompanion" class="tsd-anchor-link">ComptaCompanion<a href="#comptacompanion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>ComptaCompanion est une plateforme de chat en ligne qui permet d'accéder à des informations et des conseils sur la comptabilité et la finance de manière facile et rapide.</p>
<blockquote>
<p>Plus d'infos et de détailles sur le cahier des charges: <a href="https://github.com/amiral-e/esp_docs/tree/main/cahier_des_charges">esp_docs/cahier_des_charges</a>.</p>
</blockquote>
<h2 id="demo" class="tsd-anchor-link">Demo<a href="#demo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Une version production du backend est accessible ici: <a href="https://cc-back-prod.fly.dev/">backend</a>.</p>
<h2 id="fonctionnalités" class="tsd-anchor-link">Fonctionnalités<a href="#fonctionnalités" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>La documentations des différentes routes est disponnible ici: <a href="https://cc-back-prod.fly.dev/docs">backend/docs</a>.</p>
<p>Les routes sont regroupées par tag. Les routes d'administration ont un tag qui commence par <code>admins-</code> et les routes utilisateur par <code>users-</code>.</p>
<p>Chaque route est documentée de la sorte :</p>
<ul>
<li>une description</li>
<li>les differentes réponses possibles avec des placeholders</li>
<li>un exmeple de commande curl pour tester la route</li>
<li>un bouton <code>Test Request</code> pour tester la route en direct</li>
</ul>
<h2 id="technologies-utilisées" class="tsd-anchor-link">Technologies utilisées<a href="#technologies-utilisées" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>Hono.dev</strong> framework web</li>
<li><strong>supabase-js</strong> pour les intéractions avec la base de donnée</li>
<li><strong>scalar</strong> pour la documentation des routes</li>
<li><strong>typedoc</strong> pour la documentation du code</li>
<li><strong><a href="http://Fly.io">Fly.io</a></strong> pour le déploiement</li>
</ul>
<h2 id="cloner-et-lancer-localement" class="tsd-anchor-link">Cloner et lancer localement<a href="#cloner-et-lancer-localement" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>Vous aurez d'abord besoin d'un projet Supabase qui peut être créé <a href="https://database.new">via le tableau de bord Supabase</a></li>
<li>Clonez le repository github</li>
<li>Installez bun</li>
<li>utilisez la commande <code>bun install</code> pour installer les dépendances</li>
<li>créer un .env à partir du .env.example et le remplir</li>
<li>utilisez la commande <code>bun run dev</code> pour lancer le projet</li>
</ol>
<h2 id="lancement-avec-docker" class="tsd-anchor-link">Lancement avec docker<a href="#lancement-avec-docker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">  </span><span class="hl-1">docker</span><span class="hl-0"> </span><span class="hl-2">build</span><span class="hl-0"> </span><span class="hl-3">-t</span><span class="hl-0"> </span><span class="hl-2">esp_back</span><span class="hl-0"> </span><span class="hl-2">.</span><br/><span class="hl-0">  </span><span class="hl-1">docker</span><span class="hl-0"> </span><span class="hl-2">run</span><span class="hl-0"> </span><span class="hl-3">-p</span><span class="hl-0"> </span><span class="hl-2">3000:3000</span><span class="hl-0"> </span><span class="hl-3">--env-file</span><span class="hl-0"> </span><span class="hl-2">.env</span><span class="hl-0"> </span><span class="hl-2">esp_back</span>
</code><button type="button">Copy</button></pre>

<h2 id="structure-du-repository" class="tsd-anchor-link">Structure du repository<a href="#structure-du-repository" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-0">├── </span><span class="hl-4">src</span><span class="hl-0"> : </span><span class="hl-5">dossier</span><span class="hl-0"> </span><span class="hl-5">principal</span><span class="hl-0"> </span><span class="hl-5">contenant</span><span class="hl-0"> </span><span class="hl-5">les</span><span class="hl-0"> </span><span class="hl-5">pages</span><span class="hl-0"> </span><span class="hl-5">et</span><span class="hl-0"> </span><span class="hl-5">les</span><span class="hl-0"> </span><span class="hl-5">composants</span><br/><span class="hl-0">│   ├── </span><span class="hl-4">test</span><span class="hl-0"> : </span><span class="hl-5">routes</span><span class="hl-0"> </span><span class="hl-5">debug</span><span class="hl-0"> </span><span class="hl-5">pour</span><span class="hl-0"> </span><span class="hl-5">faciliter</span><span class="hl-0"> </span><span class="hl-5">les</span><span class="hl-0"> </span><span class="hl-5">tests</span><span class="hl-0"> </span><span class="hl-5">sur</span><span class="hl-0"> </span><span class="hl-5">dev</span><br/><span class="hl-0">│   ├── </span><span class="hl-4">middlewares</span><span class="hl-0"> : </span><span class="hl-5">middlewares</span><span class="hl-0"> </span><span class="hl-5">liés</span><span class="hl-0"> </span><span class="hl-5">à</span><span class="hl-0"> </span><span class="hl-5">l</span><span class="hl-2">&#39;authentificatio</span><span class="hl-6">n</span><br/><span class="hl-0">│   ├── </span><span class="hl-4">admins</span><span class="hl-0"> : </span><span class="hl-5">routes</span><span class="hl-0"> </span><span class="hl-5">admins</span><br/><span class="hl-0">│   │   ├── </span><span class="hl-4">collections</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">collections</span><span class="hl-0"> </span><span class="hl-5">globale</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">la</span><span class="hl-0"> </span><span class="hl-5">plateforme</span><br/><span class="hl-0">|   |   ├── </span><span class="hl-4">documents</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">documents</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">collections</span><span class="hl-0"> </span><span class="hl-5">globales</span><br/><span class="hl-0">│   │   ├── </span><span class="hl-4">config</span><span class="hl-0"> : </span><span class="hl-5">configuration</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">la</span><span class="hl-0"> </span><span class="hl-1">plateforme</span><span class="hl-0"> (</span><span class="hl-5">prix</span><span class="hl-0">, </span><span class="hl-5">prompts</span><span class="hl-0">)</span><br/><span class="hl-0">│   │   ├── </span><span class="hl-4">forum</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">et</span><span class="hl-0"> </span><span class="hl-5">administration</span><span class="hl-0"> </span><span class="hl-5">du</span><span class="hl-0"> </span><span class="hl-5">forum</span><br/><span class="hl-0">│   │   ├── </span><span class="hl-4">profile</span><span class="hl-0"> : </span><span class="hl-5">administration</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">profiles</span><span class="hl-0"> </span><span class="hl-1">utilisateurs</span><span class="hl-0"> (</span><span class="hl-5">credits</span><span class="hl-0">, </span><span class="hl-5">niveau</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">connaissance</span><span class="hl-0">)</span><br/><span class="hl-0">│   │   ├── </span><span class="hl-4">questions</span><span class="hl-0"> : </span><span class="hl-5">configuration</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">question</span><span class="hl-0"> </span><span class="hl-5">predefinies</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">la</span><span class="hl-0"> </span><span class="hl-5">plateforme</span><br/><span class="hl-0">│   │   ├── </span><span class="hl-4">self</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">admins</span><br/><span class="hl-0">|   |   └── </span><span class="hl-4">users</span><span class="hl-0"> : </span><span class="hl-5">lister</span><span class="hl-0"> </span><span class="hl-5">les</span><span class="hl-0"> </span><span class="hl-5">users</span><br/><span class="hl-0">│   └── </span><span class="hl-4">users</span><span class="hl-0"> : </span><span class="hl-5">routes</span><span class="hl-0"> </span><span class="hl-5">utilisateurs</span><br/><span class="hl-0">│       ├── </span><span class="hl-4">chat</span><span class="hl-0"> : </span><span class="hl-5">envoie</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">messages</span><span class="hl-0"> </span><span class="hl-5">à</span><span class="hl-0"> </span><span class="hl-5">l</span><span class="hl-2">&#39;assistan</span><span class="hl-6">t</span><br/><span class="hl-0">│       ├── </span><span class="hl-4">collections</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">collections</span><br/><span class="hl-0">|       ├── </span><span class="hl-4">documents</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">documents</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">collections</span><br/><span class="hl-0">│       ├── </span><span class="hl-4">conversations</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">conversations</span><br/><span class="hl-0">│       ├── </span><span class="hl-4">forum</span><span class="hl-0"> : </span><span class="hl-5">interaction</span><span class="hl-0"> </span><span class="hl-5">avec</span><span class="hl-0"> </span><span class="hl-5">le</span><span class="hl-0"> </span><span class="hl-5">forum</span><br/><span class="hl-0">│       ├── </span><span class="hl-4">profile</span><span class="hl-0"> : </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">du</span><span class="hl-0"> </span><span class="hl-5">profil</span><span class="hl-0"> </span><span class="hl-5">utilisateur</span><br/><span class="hl-0">│       ├── </span><span class="hl-4">questions</span><span class="hl-0"> : </span><span class="hl-5">récupération</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">questions</span><span class="hl-0"> </span><span class="hl-5">prédéfinies</span><span class="hl-0"> </span><span class="hl-5">selon</span><span class="hl-0"> </span><span class="hl-5">le</span><span class="hl-0"> </span><span class="hl-5">niveau</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">connaissance</span><br/><span class="hl-0">|       └── </span><span class="hl-4">reports</span><span class="hl-0"> : </span><span class="hl-5">génération</span><span class="hl-0"> </span><span class="hl-5">et</span><span class="hl-0"> </span><span class="hl-5">gestion</span><span class="hl-0"> </span><span class="hl-5">des</span><span class="hl-0"> </span><span class="hl-5">rapports</span><span class="hl-0"> </span><span class="hl-5">de</span><span class="hl-0"> </span><span class="hl-5">l</span><span class="hl-2">&#39;assistan</span><span class="hl-6">t</span><br/><span class="hl-0">└── </span><span class="hl-4">sonar</span><span class="hl-0"> : </span><span class="hl-5">documentation</span><span class="hl-0"> </span><span class="hl-5">pour</span><span class="hl-0"> </span><span class="hl-1">SonarQube</span><span class="hl-0"> (</span><span class="hl-5">installation</span><span class="hl-0">, </span><span class="hl-5">scan</span><span class="hl-0">)</span>
</code><button>Copy</button></pre>

<blockquote>
<p>Les fichiers .test.ts contiennt les tests unitaires, les fichiers _def.ts contiennent les définition des routes. Les autres fichiers contiennent les fonctions utilisées par les routes.</p>
</blockquote>
<h2 id="résultats-analyse-de-qualité-sonarqube" class="tsd-anchor-link">Résultats Analyse de Qualité SonarQube<a href="#résultats-analyse-de-qualité-sonarqube" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="media/results.png" alt="image"></p>
<h2 id="liste-des-commandes-bun-disponnibles" class="tsd-anchor-link">Liste des commandes Bun disponnibles<a href="#liste-des-commandes-bun-disponnibles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>bun install</code> installe toutes les dependances</li>
<li><code>bun run dev</code> lance le serveur de développement</li>
<li><code>bun run build</code> build le projet pour la production</li>
<li><code>bun run format ./ ./src/</code> formatte le code des fichiers</li>
<li><code>bun run deploy-dev</code> déployer le projet dans l'environnement de développement <a href="http://fly.io">fly.io</a></li>
<li><code>bun run deploy-prod</code> déployer le projet dans l'environnement de production <a href="http://fly.io">fly.io</a></li>
<li><code>bun --env-file=.env ...</code> exécute la commande bun en utilisant un fichier d'environnement spécifique</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#comptacompanion"><span>Compta<wbr/>Companion</span></a><ul><li><a href="#demo"><span>Demo</span></a></li><li><a href="#fonctionnalités"><span>Fonctionnalités</span></a></li><li><a href="#technologies-utilisées"><span>Technologies utilisées</span></a></li><li><a href="#cloner-et-lancer-localement"><span>Cloner et lancer localement</span></a></li><li><a href="#lancement-avec-docker"><span>Lancement avec docker</span></a></li><li><a href="#structure-du-repository"><span>Structure du repository</span></a></li><li><a href="#résultats-analyse-de-qualité-sonarqube"><span>Résultats <wbr/>Analyse de <wbr/>Qualité <wbr/>Sonar<wbr/>Qube</span></a></li><li><a href="#liste-des-commandes-bun-disponnibles"><span>Liste des commandes <wbr/>Bun disponnibles</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">backend</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
